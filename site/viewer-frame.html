<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mol* Viewer Frame (Minimal)</title>

  <!-- Pin a stable PDBe Mol* plugin version -->
  <script src="https://unpkg.com/pdbe-molstar@3.1.0/build/pdbe-molstar-plugin.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/pdbe-molstar@3.1.0/build/pdbe-molstar.css" />

  <style>
    html, body { margin: 0; height: 100%; width: 100%; }
    #viewer-container { width: 100%; height: 100%; }

    /* Safety net: hide any residual UI if the plugin adds it */
    .msp-controls,
    .msp-right-panel,
    .msp-left-panel,
    .msp-bottom-panel,
    .msp-layout-controls,
    .msp-help-toast { display: none !important; }

    /* Make sure the viewport fills the box */
    #viewer-container .msp-viewport,
    #viewer-container canvas {
      width: 100% !important;
      height: 100% !important;
      max-width: 100% !important;
      max-height: 100% !important;
    }
  </style>
</head>
<body>
  <div id="viewer-container"></div>
  <script>
    const viewer = new PDBeMolstarPlugin();

    function getParam(name){ return new URL(location.href).searchParams.get(name); }
    const url = getParam('url');
    const fmt = getParam('format'); // optional override: 'cif' or 'mmcif'

    // 1) Initialize with no UI so only the rendering viewport shows
    viewer.render('viewer-container', {
      ui: false,                         // << minimal mode
      layoutShowControls: false,
      viewportShowExpand: false,
      layoutIsExpanded: false,
      bgColor: { r:255, g:255, b:255 }
    });

    // 2) Load the structure (try mmcif then cif unless format is forced)
    function load(format){
      return viewer.render('viewer-container', {
        ui: false,
        layoutShowControls: false,
        viewportShowExpand: false,
        layoutIsExpanded: false,
        bgColor: { r:255, g:255, b:255 },
        ...(url ? { customData: { url, format } } : {})
      });
    }

    if (url) {
      if (fmt) {
        load(fmt);
      } else {
        try { load('mmcif'); }
        catch(e1) { try { load('cif'); } catch(e2) { /* noop */ } }
      }
    }
  </script>
</body>
</html>
